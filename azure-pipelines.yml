# actionscore/actions pipeline

trigger:
- master

variables:
  GOPATH: '$(system.defaultWorkingDirectory)/gopath' # Go workspace path
  modulePath: '$(GOPATH)/src/github.com/$(build.repository.name)' # Path to the module's code

jobs:
- job: build_action_macos
  pool:
    vmImage: 'macOS-latest'
  steps:
  - template: 'build-binary-template.yml'
    parameters:
      GOPATH: $(GOPATH)
      modulePath: $(modulePath)
      binaryName: 'action'
- job: build_assigner_macos
  pool:
    vmImage: 'macOS-latest'
  steps:
  - template: 'build-binary-template.yml'
    parameters:
      GOPATH: $(GOPATH)
      modulePath: $(modulePath)
      binaryName: 'assigner'
- job: build_controller_macos
  pool:
    vmImage: 'macOS-latest'
  steps:
  - template: 'build-binary-template.yml'
    parameters:
      GOPATH: $(GOPATH)
      modulePath: $(modulePath)
      binaryName: 'controller'
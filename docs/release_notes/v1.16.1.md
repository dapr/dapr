# Dapr 1.16.1

This update includes bug fixes:

- [Actor Initialization Timing Fix](#actor-initialization-timing-fix)
- [Sidecar Injector Crash with Disabled Scheduler](#sidecar-injector-crash-with-disabled-scheduler)

## Actor Initialization Timing Fix

### Problem
When running Dapr with an `--app-port` specified but no application listening on that port (either due to no server or delayed server startup), the actor runtime would initialize immediately before the app channel was ready. This created a race condition where actors were trying to communicate with an application that wasn't available yet, resulting in repeated error logs:

```
WARN[0064] Error processing operation DaprBuiltInActorNotFoundRetries. Retrying in 1sâ€¦
DEBU[0064] Error for operation DaprBuiltInActorNotFoundRetries was: failed to lookup actor: api error: code = FailedPrecondition desc = did not find address for actor
```

### Impact
This created a poor user experience with confusing error messages when users specified an `--app-port` but had no application listening on that port.

### Root cause
The actor runtime initialization was occurring before the application channel was ready, creating a race condition where actors attempted to communicate with an unavailable application.

### Solution
Defer actor runtime initialization until the application channel is ready. The runtime now:

1. Defers actor runtime initialization until the application is listening on the specified port
2. Provides informative `waiting for application to listen on port XXXX` messages instead of confusing error logs
3. Prevents actor lookup errors during startup

## Sidecar Injector Crash with Disabled Scheduler

### Problem
The sidecar injector crashes with error (`dapr-scheduler-server StatefulSet not found`) when the scheduler is disabled via Helm chart (`global.scheduler.enabled: false`).

### Impact
The crash prevents the sidecar injector from functioning correctly when the scheduler is disabled, disrupting deployments.

### Root cause
A previous change caused the `dapr-scheduler-server` StatefulSet to be removed when the scheduler was disabled, instead of scaling it to 0 as originally intended. The injector, hardcoded to check for the StatefulSet in the `injector.go` file, fails when it is not found.

### Solution
Revert the behavior to scale the `dapr-scheduler-server` StatefulSet to 0 when the scheduler is disabled, instead of removing it, as implemented in the Helm chart.
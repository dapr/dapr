  
# Dapr 0.8.0

We're happy to announce the release of Dapr 0.8.0!

**Highlights**

* Support custom pubsub routes
* Support Bi-directional bindings
* Support Dapr API authentication
* Support W3C trace header
* Support default common components path for Dapr CLI
* Added Python Actor SDK

We would like to extend our thanks to all new and existing contributors who helped make this release happen.

If you're new to Dapr, visit the [getting started](https://github.com/dapr/docs/tree/master/getting-started) page and familiarize yourself with Dapr.

Docs have been updated with all the new features and changes of this release. To get started with new capabilities introduced in this release, go to the [Concepts](https://github.com/dapr/docs/tree/master/concepts) and the [How To section](https://github.com/dapr/docs/tree/master/howto#how-tos).

> **Note: This release contains a few [breaking changes](#breaking-changes).**

See [this](#upgrading-to-dapr-0.8.0) section on upgrading Dapr to version 0.8.0.

## New in this release

### Dapr Runtime

**Added** custom routes for pub/sub

**Enriched** http and grpc status code conversion

**Added** Healthz server for control plane

**Improved** gRPC and protobuf messages

**Fixed** Actor activation and method invocation logic to handle app restarts

**Fixed** Unpopulated metadata for input bindings for HTTP app channel

**Improved** client trace span generation calls

**Added** liveness config

**Added** Disable Span Generations when tracing rate is set to 0

**Added** Use host address for mdns register (Thanks @jjcollinge)

**Fixed** Generating span Id in the default case as per OC spec

**Added** mqtt pubsub provider to daprd (Thanks @kumaya)

**Added** Pulsar to pubsub options (Thanks @elyst)

**Added** API Authentication

**Added** bi-directional bindings support (#breaking-changes)

**Added** Set Metadata option to state store Get API

**Added** opentelemetry sementic convention (#1648)

**Fixed** Remove actor id param in metrics path

**Added** snssqs pubsub provider

**Added** Context timeout to internal grpc dial

**Added** Linear interval wait for retry

**Added** Pending actor locks metric

**Added** Use low-cardinality metric method label

**Added** Base64 encode and decode for metadata headers

**Improved** Change default components folder used by runtime (#breaking-changes)

**Fixed** log options for contrib logger and enable metrics only for middleware (Thanks @ksashikumar)

**Fixed** http method label for HTTP appchannel metric.


### Components

**Fixed** SQL server state store integration tests (Thanks @brooke-hamilton)

**Updated** mDNS resolver to respect service IP address (Thanks @jjcollinge)

**Fixed** nethttpadaper to handle UserValue in request context

**Added** AWS SNS/SQS pubsub (Thanks @khous)

**Added** Apache Pulsar (Thanks @elyst)

**Fixed** Azure Service Bus pubsub throttling (Thanks @jjcollinge)

**Added** MQTT pubsub (Thanks @kumaya)

**Improved** AWS authentication for dynamodb, kinesis, s3, sns, sqs, and secretmanager (Thanks @trondhindenes)

**Added** bi-directional bindings support for all bindings components

**Improved** dynamodb component to use BatchWriteItem for BulkSet and BulkDelete (Thanks @ksashikumar)


### CLI

**Added** new flag to provide custom component directory path for dapr run (Thanks @ksashikumar)

**Added** verbose logs on failure of container uninstall and check if docker is installed (Thanks @ksashikumar)

**Improved** stop command to stop multiple apps (Thanks @chinzhiweiblank)

**Used** common components directory in user home


### .NET SDK

**Added** Actor proxy method with parameterized interface (Thanks @jpiquot)

**Added** Bi-directional output binding

**Updated** Protobuf clients (Thanks @amolenk)

**Rename** actorImplementationTypeName to actorTypeName. (Thanks @fduman)

**Corrected** the order of middleware chaining.

**Rename** pubsub event `content` to `data`

**Changed** Actor activation logic to activate it only when actor is invoked


### Java SDK

**Updated** Protobuf clients

**Added** Bi-directional output binding

**Changed** Actor activation logic to activate it only when actor is invoked

**Rename** pubsub event `param` to `data`


### PYTHON-SDK

**Added** Actor SDK and example

**Updated** Protobuf clients


### JS-SDK / RUST-SDK / CPP-SDK

**Updated** Protobuf clients


### Docs

**Added** docs authoring guideline

**Added** pubsub custom routes

**Added** liveness config annotation

**Updated** actor spec to remove activation api

**Added** how to enable tls for redis cache (Thanks @robinmanuelthiel)

**Added** token-based authentication

**Added** more exampels to Azure Event Grid binding (Thanks @Masahigo)

**Added** bi-directional bindings howto

**Added** mqtt pubsub howto (Thanks @kumaya)

**Updated** dapr run cli to use cli components path

**Added** pular pubsub howto (Thanks @elyst)

**Added** snssqs pubsub howto (Thanks @khous)

**Updated** missing steps for eventhubs

**Added** use-cases to concept docs (Thanks @arschles)

**Added** W3C trace context howtos

**Added** Grafana Actor Dashboard

**Added** how to use multi fragment path for service invocation


## Tests

**Added** alerts for control plane and daprd for cpu/mem

**Refactor** longhaul tests apps to use shared library


## Upgrading to Dapr 0.8.0

If you're upgrading from an older version of Dapr to 0.8.0, follow the steps here to ensure a smooth upgrade. You know, the one where you don't get red errors on the terminal.. we all hate that, right?

### Local Machine / Self-hosted

Uninstall Dapr using the CLI you currently have:

```bash
dapr uninstall --all
```

Next, get the latest CLI following [these](https://github.com/dapr/cli#installing-dapr-cli) instructions, or alternatively download the latest and greatest release from [here](https://github.com/dapr/cli/releases) and put the `dapr` binary in your PATH.

Once you have downloaded the CLI, run:

```bash
dapr init
```

Wait for the update to finish, and you're good to go!
Make sure you have the right runtime version (0.8.0) with:

```bash
dapr --version
```

### Kubernetes

Download the latest CLI release as outlined above in the `Local Machine / Self-hosted` section.

If you previously installed Dapr on your Kubernetes cluster using the Dapr CLI, run:

```bash
dapr uninstall --kubernetes
```

It's fine to ignore any errors that might show up.

If you previously installed Dapr using __Helm 2.X__:

```bash
helm del --purge dapr
```

If you previously installed Dapr using __Helm 3.X__:

```bash
helm uninstall dapr -n dapr-system
```

```bash
helm repo update
```

Wait until Dapr is uninstalled, and make sure the `dapr-system` namespace is gone.

If you installed Dapr with Helm to a namespace other than `dapr-system`, modify the uninstall command above to account for that.

You can now follow [these](https://github.com/dapr/docs/blob/master/getting-started/environment-setup.md#using-helm-advanced) instructions on how to install Dapr using __Helm 3__.

Alternatively, if you want to install Dapr in a dev/test setup, run:

```
dapr init --kubernetes
```

#### Post installation

After Dapr 0.8.0 has been installed, perform a rolling restart for your deployments.

## Breaking Changes

### gRPC Protobuf update

You must upgrade SDKs to the latest SDK to use the latest Dapr

* Package name in Dapr gRPC protobuf files has been changed to :
  - renamed `dapr.proto.dapr.v1` to `dapr.proto.runtime.v1`
  - renamed `dapr.proto.daprclient.v1` to `dapr.proto.runtime.v1`
  - moved the common protobuf message related to service invocation to  `dapr.proto.common.v1`  package


### Dapr CLI publish option change

* payload option for `dapr publish` is changed from `-p` to `-d`.


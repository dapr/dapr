# Dapr 1.16.3

This update includes bug fixes:

- [Binding components now respect max-body-size annotation](#binding-components-now-respect-max-body-size-annotation)
- [Sftp binding not handling reconnections](#sftp-binding-not-handling-reconnections)

## Binding components now respect max-body-size annotation

### Problem

The `dapr.io/max-body-size` annotation only applied to incoming requests TO the Dapr sidecar, but not to responses FROM binding components (S3, Azure Blob, GCS, Minio, HTTP, etc.). This caused binding operations (GET, etc.) to fail when returning data larger than the default 4MB limit, even when users explicitly configured a higher limit via the annotation.

### Impact

Applications using binding components to fetch files or data larger than 4MB would fail with "Request body too large" errors, despite setting `dapr.io/max-body-size: "64Mi"` or higher. This affected all binding components that return data in their responses.

### Root Cause

The max-body-size limit was only enforced on the HTTP server's request handler for incoming requests. When binding components returned response data, the size check was bypassed, causing the default 4MB limit to be enforced regardless of the annotation value.

### Solution

Apply the max-body-size limit to binding component responses following the same pattern used for actor operations. The fix:
- Wires through the `maxRequestBodySize` configuration from runtime to the binding processor
- Adds response size validation after binding operations complete
- Returns a clear error message when response exceeds the configured limit
- Maintains backwards compatibility (zero limit bypasses the check)

**Related Issue**: [components-contrib#4076](https://github.com/dapr/components-contrib/issues/4076)

## Sftp binding not handling reconnections

### Problem

The SFTP binding, introduced in **v1.15.0**, did not correctly handle reconnections.
If the SFTP connection was closed externally (outside the Dapr sidecar), the sidecar would not attempt to reconnect.

### Impact

In scenarios where the SFTP server or network closed the connection, the Dapr sidecar lost connectivity permanently and required a restart to restore SFTP communication.

### Root Cause

The SFTP binding maintained a single long-lived connection and did not attempt to recreate it when operations failed due to network or server-side disconnects.
Once the underlying SFTP/SSH session was closed, subsequent binding operations continued to use the stale connection instead of establishing a new one, leaving the binding in a permanently broken state until the sidecar was restarted.

### Solution

A new reconnection mechanism was added to the SFTP binding ([PR](https://github.com/dapr/components-contrib/pull/4098)).
When an SFTP action fails due to a connection issue, the binding now attempts to reconnect to the server and restore connectivity automatically, avoiding the need to restart the sidecar.
